<!--

    <wc-term-container termtitle="...title here...">
        ...content here...
    <wc-term-container>

-->


<template id="termContainer">
    <style>
        .group{
            background: rgba(0,0,0,.5);position:relative; border:1px solid white;    margin: 0.75em; padding: 0.5em; min-width: 80px;
        }
        .group .title{
            background:orange; color:black; font-weight:bold; position:absolute; top:-0.75em; left:10px;
        }
        .group .collapse{
            display:none;
        }
    </style>
    <div class="group">
        <div class="title">
            [ <span id="title"></span> ]
        </div>
        <div class="content">
            <content></content>
        </div>
    </div>
</template>

<script>
    (function(window, document) {
        var thatDoc = document;
        var thisDoc =  (thatDoc._currentScript || thatDoc.currentScript).ownerDocument;
        var template = thisDoc.querySelector('template').content;
        var MyElementProto = Object.create(HTMLElement.prototype);
        this.shadowRoot;

        MyElementProto.what = '#';
        MyElementProto.createdCallback = function() {
            this.shadowRoot = this.createShadowRoot();
            var clone = thatDoc.importNode(template, true);
            this.shadowRoot.appendChild(clone);

            this.termTitle = this.shadowRoot.querySelector('#title');
            if (this.hasAttribute('termtitle')) {
                var what = this.getAttribute('termtitle');
                this.setTitle(what);
            } else this.setTitle(this.what);
        };
        MyElementProto.attachedCallback = function(){
            this.termTitle.addEventListener('click', this.toggleCollapse.bind(this));
        };
        MyElementProto.detachedCallback = function(){
            this.termTitle.removeEventListener('click', this.toggleCollapse.bind(this));
        };
        MyElementProto.attributeChangedCallback = function(attr, oldVal, newVal) {
            if (attr === 'termtitle') this.setTitle(newVal);
        };
        MyElementProto.setTitle = function(val) {
            this.what = val;
            this.termTitle.textContent = this.what;
        };
        MyElementProto.toggleCollapse = function(){
            this.shadowRoot.querySelector('.content').classList.toggle('collapse');
        };

        window.termContainer = thatDoc.registerElement('wc-term-container', { prototype: MyElementProto });
    })(window, document);
</script>